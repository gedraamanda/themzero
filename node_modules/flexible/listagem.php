<?php
$posts = get_sub_field( 'home_listagem' );

if ( empty( $posts ) ) {
	return;
}
?>

<div class="home" style="width: 70%;float: right;margin-right: 10%;">
    <div class="d-flex flex-column card-lista">
	    <?php
	    foreach ( $posts as $post ) {
	        $postData = $post['post'];

		    $titulo       = ! empty( $post['titulo'] ) ? $post['titulo'] : $postData->post_title;
		    $linha_fina   = ! empty( $post['linha_fina'] ) ? $post['linha_fina'] : get_field( 'intro-do-texto', $postData->ID );
		    $ano          = get_field( 'ano', $postData->ID );
		    $img_destaque = get_the_post_thumbnail_url( $postData->ID, 'medium' );
		    $categoria    = get_the_category( $postData->ID );
	    ?>

            <div class="d-flex card-lista__block border-top py-4 py-md-3">
                <?php
                if ( ! empty( $ano ) ) {
	                echo '<span class="flex-md-fill pr-4 d-block">' . $ano . '</span>';
                }
                ?>

                <div class="titulo flex-md-fill px-md-4 pt-md-4">
                    <a href="#">
                        <h3 class="m-0 text-uppercase"><?php echo $titulo ?></h3>


	                    <?php if(!empty($linha_fina)) {
		                    echo '<p class="m-0 mt-1 d-block">'.$linha_fina.'</p>';
	                    } ?>
                    </a>
                </div>

	            <?php if ( ! empty( $img_destaque ) ) { ?>
                    <div class="imagem flex-md-fill ml-4" style="background: url('<?php echo $img_destaque ?>')"></div>
	            <?php } ?>
            </div>

	    <?php }
	    ?>


    </div>
</div>


